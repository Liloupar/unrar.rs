# Changelog
[//]: # "DO NOT EDIT THIS FILE MANUALLY"
[//]: # "This file is automatically generated using git-cliff"
[//]: # "See here for more information: https://git-cliff.org"
All notable changes to this project will be documented in this file.

This project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.5.4] - 2024-08-31

This release fixes the long standing unicode filename bug on Linux, as well as as the recent tempdir bug on macOS.

Issues: #34, #44

### <!--1-->Bug Fixes

- <details>
  <summary>unicode filenames on Linux (f3fb23d, #44)</summary>
  <blockquote>

  This bug caused CJK chars in filename to be stripped out on Linux.
  For example, `/media/mydisk/fooにほん.rar`  would result in
  `/media/mydisk/foo` so the open will fail
  
  due to
  
  ```cpp
      if (r->ArcNameW!=nullptr && *r->ArcNameW!=0)
        ArcName=r->ArcNameW;
      else
        CharToWide(AnsiArcName,ArcName);
  
      Data->Arc.Open(ArcName,FMF_OPENSHARED)
  ```
  
  in `Data->Arc.Open`, ArcName is converted with `WideToChar`
  causing the CJK bytes to get lost. So we pass it as AnsiArcName,
  so `CharToWide` is called first, causing to conversion to work.
  </blockquote>
  </details>

### <!--4-->Miscellaneous / Refactors

- <em>(dll)</em> upgrade unrar source code version to 7.0.9 (8992d51)
- <details>
  <summary><em>(dll)</em> fix build by avoiding call to __builtin_cpu_supports (c3b414e)</summary>
  <blockquote>

  This fixes the ___cpu_model undefined error on macOS 12 and macOS 13<br>
  confirmed macOS 14 does not have this issue
  </blockquote>
  </details>
- <em>(dll)</em> update patches (801318a)
- <em>(release)</em> fancy release notes (53ba119)
- <details>
  <summary>remove macos-11 due to it does not supported by github anymore, add macOS 13  and macOS 14 support (3c37105)</summary>
  <blockquote>

  see https://github.blog/changelog/2024-05-20-actions-upcoming-changes-to-github-hosted-macos-runners/#macos-11-deprecation-and-removal
  </blockquote>
  </details>
- add workflow_dispatch event (254025c)

### <!--5-->Testing

- add test case to verify tempdir extraction is fixed (519956a, #34)

### <!--6-->Documentation

- add RAR 5.0 archive format doc (1df450f)


## [0.5.3] - 2024-02-22

Minor release that adds opening archives in test mode


### <!--2-->Features

- add test mode (c0c1243)

### <!--4-->Miscellaneous / Refactors

- <em>(unrar_sys)</em> add Apache2 license to Cargo.toml (e002f23)

### <!--6-->Documentation

- <em>(vendor)</em> htm -> md (for viewing in browser) (c30e6d0)

### <!--8-->Styling

- <em>(docs)</em> fix markdown (3e1fa1a)


## [0.5.2] - 2023-11-11

Minor bug fix release that fixes builds on Windows targets adds minor performance improvements


### <!--1-->Bug Fixes

- <em>(archive)</em> dont strip parents in path methods (5ebac5e)
- <em>(unrar_sys)</em> remove indirect dependency to MSVC comsupp library for windows-gnu target (f2adc58)
- <details>
  <summary><em>(unrar_sys)</em> use winapi crate for all windows targets (fe6838a)</summary>
  <blockquote>

  chore(unrar_sys): link against static libstdc++ on windows-gnu targets<br>
  chore(unrar_sys): fall back to C++14 (minimal version supported by MSVC)
  </blockquote>
  </details>

### <!--3-->Performance

- <em>(archive)</em> use as_str instead of to_string_lossy where sensible (7c61362)

### <!--4-->Miscellaneous / Refactors

- <em>(license)</em> add Apache2 license #1 (fe9d57f)
- <em>(unrar_sys)</em> upgrade DLL version to 6.24.0 (5d196bf)
- <em>(unrar_sys)</em> add upgrade instructions and script (327b1c1)

### <!--5-->Testing

- use PathBuf to not fail on windows (5169021)

### <!--6-->Documentation

- <em>(archive)</em> add docs examples for Archive::break_open (015ffb1)
- <em>(unrar_sys)</em> add vendor documentation (c087b73)


## [0.5.1] - 2023-06-28

This release fixes a critical UB bug


### <!--1-->Bug Fixes

- <em>(open_archive)</em> fix NULL deref, pass valid pointer (db0d379)

### <!--4-->Miscellaneous / Refactors

- add test step for unrar_sys library (986de02)

### <!--7-->Example

- <em>(unrar_sys)</em> format lister example (da5f1a4)
- <em>(unrar_sys)</em> fix windows build for lister example (9164631)


## [0.5.0] - 2023-06-22

This is a milestone release that, among others, allows one to extract files directly into memory -- something people have been asking forever how to do.

I've also completely rewritten major parts of the library and am very proud of the way things are looking right now. Utilizing the typestate pattern, the library enforces correct usage at compile time, only exposing methods when they make sense (depending on a combination of open mode and current cursor position).

Before this release, the library was hard to use and it was not possible to skip some files in the archive while, for instance, extracting others. One operation had to be chosen for all files. That has changed now. However, the drawback is that iterating archives is now a bit harder since the Iterator trait is not implemented for archives that are opened in Process mode (since it's hard to enforce an operation at call-site).

Another major focus of this release was documentation: all API items are documented now except for very few exceptions. The crate docs also features a very extensible introduction as well.


### <!--1-->Bug Fixes

- <em>(unrar_sys)</em> fix broken code in example and test (ddbf0fe)
- avoid endlessly returning errors in Iterator (46dd054)

### <!--2-->Features

- implement typestate pattern, completely rewrite major parts (b3ef161)
- upgrade dependencies (4539125)
- Archive::as_first_part returns self (0c25662)

### <!--4-->Miscellaneous / Refactors

- <em>(dll)</em> upgrade DLL version to 6.2.8 (598e273)
- update author e-mail (3e40b8d)
- update authors (edeb4bc)
- add Github Actions workflow (b8f2139)
- edition=2021, remove superfluous extern crates (901a28a)
- edition=2021, remove superfluous extern crates (dcbad8e)
- return Result<Option<T>,E> instead of Option<Result<T,E>> (6bca25c)

### <!--6-->Documentation

- further improve crate-level docs (c5bb2bf)

### <!--7-->Example

- <em>(read_named)</em> rename example and print content (9b13543)

### <!--8-->Styling

- cargo fmt (0bf0d59)
- use std::ptr::null/_mut instead of 0 as *_ (d0e6547)


